export const prerender = false;
import type { APIRoute } from 'astro'; import { getCoinById, updateCoin, deleteCoin } from '../../../lib/db';  export const GET: APIRoute = async ({ params }) => {   const id = params.id;   if (!id) return new Response(JSON.stringify({ error: 'ID requerido' }), { status: 400 });    try {     const coin = getCoinById.get(id);     if (!coin) return new Response(JSON.stringify({ error: 'Moneda no encontrada' }), { status: 404 });     return new Response(JSON.stringify(coin), { status: 200 });   } catch (error) {     return new Response(JSON.stringify({ error: 'Error interno del servidor' }), { status: 500 });   } };  export const PUT: APIRoute = async ({ params, request }) => {   const id = params.id;   if (!id) return new Response(JSON.stringify({ error: 'ID requerido' }), { status: 400 });    try {     const formData = await request.formData();     const name = formData.get('name') as string;     const description = formData.get('description') as string;     const year = formData.get('year') as string;     const coinType = formData.get('coin_type') as string;     const mint = formData.get('mint') as string;     const approximateValue = formData.get('approximate_value') as string;     const rarity = parseInt(formData.get('rarity') as string);     const country = formData.get('country') as string;     const denomination = formData.get('denomination') as string;      updateCoin.run(name, description, year, coinType, mint, approximateValue, rarity, country, denomination, id);     return new Response(JSON.stringify({ success: true }), { status: 200 });   } catch (error) {     return new Response(JSON.stringify({ error: 'Error interno del servidor' }), { status: 500 });   } };  export const DELETE: APIRoute = async ({ params }) => {   const id = params.id;   if (!id) return new Response(JSON.stringify({ error: 'ID requerido' }), { status: 400 });    try {     deleteCoin.run(id);     return new Response(JSON.stringify({ success: true }), { status: 200 });   } catch (error) {     return new Response(JSON.stringify({ error: 'Error interno del servidor' }), { status: 500 });   } };

